---
milestone: v1.3
audited: 2026-02-28T21:00:00Z
status: gaps_found
scores:
  requirements: 14/21
  phases: 3/4
  integration: 17/18
  flows: 5/6
gaps:
  requirements:
    - id: "DATA-02"
      status: "unsatisfied"
      phase: "Phase 14"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 14 has no directory, no plans, no code. Requirement unstarted."
    - id: "DATA-03"
      status: "unsatisfied"
      phase: "Phase 14"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 14 has no directory, no plans, no code. Requirement unstarted."
    - id: "DATA-04"
      status: "unsatisfied"
      phase: "Phase 14"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 14 has no directory, no plans, no code. Requirement unstarted."
    - id: "DATA-05"
      status: "unsatisfied"
      phase: "Phase 14"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 14 has no directory, no plans, no code. Requirement unstarted."
    - id: "DATA-06"
      status: "unsatisfied"
      phase: "Phase 14"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 14 has no directory, no plans, no code. Requirement unstarted."
    - id: "SRCH-01"
      status: "unsatisfied"
      phase: "Phase 14"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 14 has no directory, no plans, no code. Requirement unstarted."
    - id: "SRCH-02"
      status: "unsatisfied"
      phase: "Phase 14"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 14 has no directory, no plans, no code. Requirement unstarted."
  integration:
    - from: "simulate/page.tsx"
      to: "drawings/page.tsx"
      issue: "Assembly deep link does not carry SimulationResult; OBT overlay is permanently absent on /drawings page"
      affected_requirements: ["VIS2-03"]
  flows:
    - flow: "View Assembly with OBT Overlay via Deep Link"
      breaks_at: "drawings/page.tsx never receives simulation data"
      affected_requirements: ["VIS2-03"]
tech_debt:
  - phase: 13-3d-parametric-cartridge-viewer
    items:
      - "powderChargeGrains prop in CartridgeViewer3D is dead code — no caller supplies it; 3D powder fill visual in cutaway is never shown"
---

# Milestone v1.3 Audit: Data Expansion + Visual Viewers

**Audited:** 2026-02-28
**Status:** gaps_found
**Score:** 14/21 requirements satisfied

## Milestone Definition of Done

> Expand component databases to 500+ bullets with community contribution support, add 2D technical SVG drawings (3-tab: cross-section, chamber, full assembly with harmonics), and build an interactive 3D parametric cartridge viewer.

## Phase Summary

| Phase | Status | Verification | Score | Requirements |
|-------|--------|-------------|-------|-------------|
| 11 — Foundation and Data Expansion | Complete | passed | 13/13 | SCHM-01, SCHM-02, SCHM-03, DATA-01 |
| 12 — 2D SVG Technical Drawings | Complete | passed | 5/5 | VIS2-01, VIS2-02, VIS2-03, VIS2-04, VIS2-05 |
| 13 — 3D Parametric Cartridge Viewer | Complete | passed | 9/9 | VIS3-01, VIS3-02, VIS3-03, VIS3-04, VIS3-05 |
| 14 — Browser Upload and Caliber-Scoped Search | **Not started** | **missing** | 0/? | DATA-02, DATA-03, DATA-04, DATA-05, DATA-06, SRCH-01, SRCH-02 |

## Requirements Coverage (3-Source Cross-Reference)

| REQ-ID | Description | Phase | VERIFICATION.md | SUMMARY Frontmatter | REQUIREMENTS.md | Final Status |
|--------|-------------|-------|-----------------|---------------------|-----------------|-------------|
| SCHM-01 | Cartridge model extended with 5 drawing fields | 11 | SATISFIED | 11-01 | [x] | **satisfied** |
| SCHM-02 | Bullet model extended with 4 rendering fields | 11 | SATISFIED | 11-01 | [x] | **satisfied** |
| SCHM-03 | Geometry engine estimates missing dimensions | 11 | SATISFIED | 11-02 | [x] | **satisfied** |
| DATA-01 | 500+ bullets covering 7 manufacturers | 11 | SATISFIED | 11-03 | [x] | **satisfied** |
| VIS2-01 | Cartridge cross-section SVG with labeled dimensions | 12 | SATISFIED | 12-02, 12-03 | [x] | **satisfied** |
| VIS2-02 | Chamber drawing with headspace, freebore, rifling | 12 | SATISFIED | 12-01, 12-02, 12-03 | [x] | **satisfied** |
| VIS2-03 | Assembly drawing with OBT harmonics overlay | 12 | SATISFIED | 12-02, 12-03 | [x] | **satisfied** (*) |
| VIS2-04 | 3-tier graceful degradation | 12 | SATISFIED | 12-01, 12-02, 12-03 | [x] | **satisfied** |
| VIS2-05 | Export 2D drawings as PNG | 12 | SATISFIED | 12-01, 12-03 | [x] | **satisfied** |
| VIS3-01 | Interactive 3D parametric cartridge model | 13 | SATISFIED | 13-01, 13-02, 13-03 | [x] | **satisfied** |
| VIS3-02 | Rotate, zoom, pan 3D model | 13 | SATISFIED | 13-02 | [x] | **satisfied** |
| VIS3-03 | Toggle cutaway half-section view | 13 | SATISFIED | 13-02 | [x] | **satisfied** |
| VIS3-04 | Code splitting, no impact on other pages | 13 | SATISFIED | 13-03 | [x] | **satisfied** |
| VIS3-05 | WebGL context disposed on navigation | 13 | SATISFIED | 13-03 | [x] | **satisfied** |
| DATA-02 | Upload bullet data via JSON | 14 | missing | missing | [ ] | **unsatisfied** |
| DATA-03 | Upload cartridge data via JSON | 14 | missing | missing | [ ] | **unsatisfied** |
| DATA-04 | Upload bullet/cartridge data via CSV | 14 | missing | missing | [ ] | **unsatisfied** |
| DATA-05 | Community data quality badge | 14 | missing | missing | [ ] | **unsatisfied** |
| DATA-06 | Safety warning banner for community data | 14 | missing | missing | [ ] | **unsatisfied** |
| SRCH-01 | Caliber-filtered parametric search | 14 | missing | missing | [ ] | **unsatisfied** |
| SRCH-02 | Caliber filter optional and backward-compatible | 14 | missing | missing | [ ] | **unsatisfied** |

(*) VIS2-03 code is correct at the component level, but integration check found the OBT overlay is unreachable from the /drawings page — see Integration Issues below.

**Orphaned requirements:** None. All 21 REQ-IDs in the traceability table are mapped to phases.

## Integration Check Results

**Cross-phase wiring:** 17/18 exports properly connected
**E2E flows:** 5/6 complete

### Connected (17 exports)

All Phase 11 geometry engine exports (types, generators, estimation functions) are correctly consumed by both Phase 12 (SVG) and Phase 13 (3D). All Phase 11 schema extensions flow through backend models → Pydantic schemas → frontend types → drawing adapters. Phase 12 DrawingTabs/DrawingViewer were correctly extended by Phase 13 without breaking 2D functionality. Export controls properly hidden on 3D tab.

### Integration Issues

**1. Assembly OBT overlay unreachable via deep link (VIS2-03)**

The `simulate/page.tsx` "Ver Dibujo de Conjunto" button navigates to `/drawings?cartridge_id=X&tab=assembly` via a `<Link>`, discarding the in-memory `SimulationResult`. The `/drawings/page.tsx` reads component IDs from query params but never receives simulation data. As a result, `AssemblyDrawing` always renders without OBT harmonic node markers and stress zone coloring.

**Remediation:** Store simulation result in shared state (React context or URL-encoded summary) so the drawings page can display the OBT overlay when arriving from simulate.

### Complete Flows (5/6)

| Flow | Status |
|------|--------|
| Browse 500+ bullets in list page | Complete |
| View cartridge cross-section with dimensions | Complete |
| View chamber drawing with clearance callouts | Complete |
| View 3D cartridge with cutaway and orbit controls | Complete |
| Export 2D drawing as PNG/SVG/PDF | Complete |
| View assembly with OBT overlay via deep link | **Broken** (simulation data lost on navigation) |

## Tech Debt

### Phase 13: 3D Parametric Cartridge Viewer

- `powderChargeGrains` prop in `CartridgeViewer3D` is dead code — no caller ever supplies it; the 3D powder fill visual in cutaway mode is never shown. Non-breaking due to null guard.

### Total: 1 item across 1 phase

## Unsatisfied Requirements

All 7 unsatisfied requirements belong to **Phase 14: Browser Upload and Caliber-Scoped Search**, which has not been started. No phase directory, no plans, no code exists.

| REQ-ID | Description |
|--------|-------------|
| DATA-02 | Upload bullet data via JSON with preview and collision handling |
| DATA-03 | Upload cartridge data via JSON with preview and collision handling |
| DATA-04 | Upload bullet/cartridge data via CSV (strict format) |
| DATA-05 | Community data quality badge capped at danger (max 35/100) |
| DATA-06 | Safety warning banner for community-sourced components |
| SRCH-01 | Caliber-filtered parametric powder search |
| SRCH-02 | Caliber filter optional and backward-compatible |

## Human Verification Items

Across all 3 completed phases, 16 items require manual browser testing:

- Phase 11: 4 items (SVG visual correctness, ogive profiles, seed runtime loading, BC accuracy)
- Phase 12: 5 items (cross-section rendering, theme switching, localStorage persistence, PNG export, deep link)
- Phase 13: 7 items (orbit controls, cutaway animation, dimension labels, WebGL fallback, memory leak check, deep links)

---

*Audited: 2026-02-28*
*Auditor: Claude (audit-milestone workflow)*
