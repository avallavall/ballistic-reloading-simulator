---
phase: 12-2d-svg-technical-drawings
plan: 02
type: execute
wave: 2
depends_on: ["12-01"]
files_modified:
  - frontend/src/components/drawings/HatchPatterns.tsx
  - frontend/src/components/drawings/DimensionLabel.tsx
  - frontend/src/components/drawings/TitleBlock.tsx
  - frontend/src/components/drawings/CompletenessBanner.tsx
  - frontend/src/components/drawings/StyleToggle.tsx
  - frontend/src/components/drawings/CartridgeCrossSection.tsx
  - frontend/src/components/drawings/ChamberDrawing.tsx
  - frontend/src/components/drawings/AssemblyDrawing.tsx
autonomous: true
requirements: [VIS2-01, VIS2-02, VIS2-03, VIS2-04]

must_haves:
  truths:
    - "User sees a cartridge cross-section SVG with case wall, primer pocket, powder area, and bullet (if provided) with hatching patterns and dual-unit dimension labels"
    - "User sees a chamber drawing showing the cartridge seated inside the chamber outline with headspace gap, neck clearance, body clearance, freebore, and throat angle labeled as computed clearance values"
    - "User sees an assembly drawing with barrel cylinder, cartridge, and bullet, with optional OBT harmonic node markers and stress zone coloring when simulation data is provided"
    - "When data is insufficient (no case_length, no base_diameter, no neck_diameter), a message 'Not enough dimensions to draw this cartridge' with an edit link is shown instead of a broken SVG"
    - "When data is basic (1-3 estimated fields), a yellow/orange banner says 'Basic view -- N of M dimensions available' with link to complete data, and the drawing still renders with available dimensions labeled"
    - "Style toggle switches between blueprint (navy background, white-blue lines, monospace) and modern (white background, color-coded materials, system font)"
  artifacts:
    - path: "frontend/src/components/drawings/CartridgeCrossSection.tsx"
      provides: "Full cartridge cross-section SVG component with internal structure, hatching, and dimension annotations"
      min_lines: 150
    - path: "frontend/src/components/drawings/ChamberDrawing.tsx"
      provides: "Chamber SVG component with clearance callouts and cartridge-in-chamber visualization"
      min_lines: 120
    - path: "frontend/src/components/drawings/AssemblyDrawing.tsx"
      provides: "Assembly SVG component with barrel, cartridge, bullet, and optional simulation overlay"
      min_lines: 150
    - path: "frontend/src/components/drawings/HatchPatterns.tsx"
      provides: "SVG <defs> block with ISO-standard hatching patterns for metals, powder, lead, copper"
    - path: "frontend/src/components/drawings/DimensionLabel.tsx"
      provides: "Reusable dimension annotation with extension lines, arrows, dual-unit text"
    - path: "frontend/src/components/drawings/CompletenessBanner.tsx"
      provides: "Yellow/orange banner for basic tier, insufficient data message with edit link"
    - path: "frontend/src/components/drawings/StyleToggle.tsx"
      provides: "Blueprint/Modern toggle with localStorage persistence"
  key_links:
    - from: "frontend/src/components/drawings/CartridgeCrossSection.tsx"
      to: "frontend/src/lib/geometry/cartridge-geometry.ts"
      via: "calls generateCartridgeProfile(dims)"
      pattern: "generateCartridgeProfile"
    - from: "frontend/src/components/drawings/ChamberDrawing.tsx"
      to: "frontend/src/lib/drawings/chamber-geometry.ts"
      via: "calls computeChamberClearances(cartridge, bullet, rifle)"
      pattern: "computeChamberClearances"
    - from: "frontend/src/components/drawings/AssemblyDrawing.tsx"
      to: "frontend/src/lib/drawings/assembly-geometry.ts"
      via: "calls computeAssemblyLayout and getObtNodePositions"
      pattern: "computeAssemblyLayout|getObtNodePositions"
---

<objective>
Build all React SVG drawing components: three main drawings (CartridgeCrossSection, ChamberDrawing, AssemblyDrawing) plus five shared sub-components (HatchPatterns, DimensionLabel, TitleBlock, CompletenessBanner, StyleToggle).

Purpose: These are the visual core of Phase 12 -- the actual technical drawing rendering. They consume the computation library from Plan 01 and produce inline SVG elements that Plan 03 will wire into the page and export system.

Output: 8 React component files in `frontend/src/components/drawings/` that render complete technical drawings with hatching, dimensions, title blocks, and graceful degradation.
</objective>

<execution_context>
@C:/Users/vall-/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/vall-/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/12-2d-svg-technical-drawings/12-CONTEXT.md
@.planning/phases/12-2d-svg-technical-drawings/12-RESEARCH.md
@.planning/phases/12-2d-svg-technical-drawings/12-01-SUMMARY.md

<interfaces>
<!-- Contracts from Plan 01 that this plan consumes. -->

From frontend/src/lib/drawings/types.ts (created by Plan 01):
```typescript
export interface DrawingTheme {
  name: 'blueprint' | 'modern';
  background: string;
  outline: string;
  hiddenEdge: string;
  dimColor: string;
  textColor: string;
  hatchColor: string;
  caseFill: string;
  copperFill: string;
  leadColor: string;
  powderFill: string;
  steelFill: string;
  titleBlockBg: string;
  titleBlockBorder: string;
  fontFamily: string;
  dimFontSize: number;
  titleFontSize: number;
}

export interface DimensionAnnotation {
  x1: number; y1: number;
  x2: number; y2: number;
  value_mm: number;
  label: string;
  side: 'top' | 'bottom' | 'left' | 'right';
  offset_tier: number;
}

export interface DrawingConfig {
  width: number; height: number;
  padding_mm: number;
  style: 'blueprint' | 'modern';
  showEstimated: boolean;
}

export interface ChamberClearances {
  headspace_gap_mm: number;
  neck_clearance_mm: number;
  body_clearance_mm: number;
  freebore_mm: number;
  throat_angle_deg: number;
  rifling_engagement_mm: number;
  estimated_fields: string[];
}

export interface AssemblyLayout {
  cartridge_x: number;
  cartridge_scale: number;
  barrel_start_x: number;
  barrel_end_x: number;
  barrel_outer_r: number;
  barrel_bore_r: number;
  bullet_tip_x: number;
  total_width_mm: number;
  total_height_mm: number;
}

export interface TitleBlockData {
  name: string;
  drawingType: string;
  scale: number;
  date: string;
  style: string;
}

export type ExportFormat = 'png' | 'svg' | 'pdf';
export type DrawingTab = 'cross-section' | 'chamber' | 'assembly';
```

From frontend/src/lib/drawings/themes.ts (created by Plan 01):
```typescript
export const blueprintTheme: DrawingTheme;
export const modernTheme: DrawingTheme;
export function getTheme(style: 'blueprint' | 'modern'): DrawingTheme;
```

From frontend/src/lib/drawings/hatching-patterns.ts (created by Plan 01):
```typescript
export interface HatchPatternDef {
  id: string;
  width: number; height: number;
  patternUnits: string;
  patternTransform?: string;
  elements: { type: 'line'|'circle'|'rect'; attrs: Record<string, string|number> }[];
}
export function getHatchPatternDefs(theme: DrawingTheme): HatchPatternDef[];
```

From frontend/src/lib/drawings/dimension-layout.ts (created by Plan 01):
```typescript
export function layoutDimensions(annotations: DimensionAnnotation[], drawingBounds: { width: number; height: number }): DimensionAnnotation[];
export const TIER_SPACING_MM: number;
export const BASE_OFFSET_MM: number;
```

From frontend/src/lib/drawings/chamber-geometry.ts (created by Plan 01):
```typescript
export function computeChamberClearances(cartridge: Cartridge, bullet: Bullet | null, rifle: { freebore_mm?: number | null; throat_angle_deg?: number | null; headspace_mm?: number | null }): ChamberClearances;
export function computeChamberProfile(cartridge: Cartridge, clearances: ChamberClearances): ProfilePoint[];
```

From frontend/src/lib/drawings/assembly-geometry.ts (created by Plan 01):
```typescript
export function computeAssemblyLayout(cartridge: Cartridge, bullet: Bullet | null, rifle: Rifle): AssemblyLayout;
export function getObtNodePositions(barrelLength: number, simulation: SimulationResult): { x: number; label: string; isNode: boolean }[];
export function getStressZone(simulation: SimulationResult, saamiMaxPsi: number): { severity: 'safe' | 'caution' | 'danger'; fraction: number };
```

From frontend/src/lib/drawings/title-block.ts (created by Plan 01):
```typescript
export function computeTitleBlock(name: string, drawingType: string, scale: number, style: 'blueprint' | 'modern'): TitleBlockData;
export const TITLE_BLOCK_WIDTH: number;  // 60
export const TITLE_BLOCK_HEIGHT: number; // 15
```

From frontend/src/lib/geometry/ (existing from Phase 11):
```typescript
export function generateCartridgeProfile(dims: CartridgeDimensions): GeometryResult;
export function generateBulletProfile(dims: BulletDimensions): GeometryResult;
// GeometryResult = { svgPath, profilePoints, estimatedFields, dataCompleteness }
```

From frontend/src/lib/types.ts:
```typescript
export interface Cartridge { id: string; name: string; case_length_mm: number; overall_length_mm: number; bore_diameter_mm: number; groove_diameter_mm: number; shoulder_diameter_mm: number|null; neck_diameter_mm: number|null; base_diameter_mm: number|null; rim_diameter_mm: number|null; shoulder_angle_deg: number|null; neck_length_mm: number|null; body_length_mm: number|null; rim_thickness_mm: number|null; case_type: string|null; saami_max_pressure_psi: number; }
export interface Bullet { id: string; name: string; diameter_mm: number; length_mm: number|null; weight_grains: number; bearing_surface_mm: number|null; boat_tail_length_mm: number|null; meplat_diameter_mm: number|null; ogive_type: string|null; material: string; bullet_type: string|null; base_type: string|null; }
export interface Rifle { id: string; name: string; barrel_length_mm: number; twist_rate_mm: number; cartridge_id: string; chamber_volume_mm3: number; weight_kg: number; barrel_condition: string; round_count: number; cartridge?: Cartridge; freebore_mm: number|null; throat_angle_deg: number|null; headspace_mm: number|null; }
export interface SimulationResult { peak_pressure_psi: number; muzzle_velocity_fps: number; barrel_time_ms: number; hoop_stress_mpa: number; barrel_frequency_hz: number; optimal_barrel_times: number[]|null; obt_match: boolean; /* ... */ }
```
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create shared SVG sub-components (HatchPatterns, DimensionLabel, TitleBlock, CompletenessBanner, StyleToggle)</name>
  <files>
    frontend/src/components/drawings/HatchPatterns.tsx
    frontend/src/components/drawings/DimensionLabel.tsx
    frontend/src/components/drawings/TitleBlock.tsx
    frontend/src/components/drawings/CompletenessBanner.tsx
    frontend/src/components/drawings/StyleToggle.tsx
  </files>
  <action>
All components use `'use client'` directive. All SVG sub-components receive a `theme: DrawingTheme` prop.

1. **HatchPatterns.tsx** -- SVG `<defs>` block rendering hatching patterns:
   - Props: `{ theme: DrawingTheme }`
   - Imports `getHatchPatternDefs` from `@/lib/drawings/hatching-patterns`
   - Returns a React Fragment containing SVG `<pattern>` elements built from the pattern definitions
   - Each pattern definition's `elements` array is mapped to SVG `<line>`, `<circle>`, or `<rect>` child elements
   - Also defines an SVG `<marker>` element with id `"dim-arrow"` for dimension line arrowheads (small triangle, 3x3 viewBox, filled with `theme.dimColor`)
   - This component is intended to be placed inside an `<svg><defs>` block

2. **DimensionLabel.tsx** -- Reusable dimension annotation with extension lines, dimension line, arrows, and dual-unit text:
   - Props: `{ x1, y1, x2, y2, value_mm, label?: string, offset_tier, side, theme, isEstimated?: boolean }`
   - Dual-unit display: `"{value_mm} mm / {value_in} in"` where value_in = value_mm / 25.4
   - Decimal precision: use the precision already in the number (e.g., 52.0 stays "52.0", 7.62 stays "7.62"). Use `toFixed()` based on: if value has no decimal part use `.1f`, else match original precision up to 3 decimals
   - ISO line weights: extension lines = 0.25mm stroke with dash "2,1", dimension line = 0.5mm stroke with arrow markers, text = dimFontSize from theme
   - `isEstimated` prop: if true, render dimension line as dashed (strokeDasharray="1,0.5") and append " (est)" to label text, so user knows the value was heuristically derived
   - For side='top'/'bottom': horizontal dimension line, extension lines go vertical
   - For side='left'/'right': vertical dimension line, extension lines go horizontal
   - Text positioned centered on the dimension line, offset 2mm away from line
   - If optional `label` prop provided (e.g., "case_length"), show it as a second line below the numeric value in smaller font (dimFontSize * 0.75)

3. **TitleBlock.tsx** -- Engineering title block SVG group:
   - Props: `{ x, y, data: TitleBlockData, theme: DrawingTheme }`
   - Imports `TITLE_BLOCK_WIDTH`, `TITLE_BLOCK_HEIGHT` from `@/lib/drawings/title-block`
   - Renders a `<g transform="translate(x,y)">` containing:
     - Outer rectangle with `theme.titleBlockBorder` stroke and `theme.titleBlockBg` fill
     - Horizontal divider lines splitting into 3 rows
     - Row 1 (top): Drawing name (e.g., ".308 Winchester") in `theme.titleFontSize`, bold
     - Row 2 (middle): Drawing type (e.g., "Cartridge Cross-Section") + scale (e.g., "Scale: 8:1")
     - Row 3 (bottom): Date + style name (e.g., "Blueprint" / "Modern")
   - All text uses `theme.fontFamily`, `theme.textColor`

4. **CompletenessBanner.tsx** -- Data completeness feedback component:
   - Props: `{ completeness: 'full' | 'basic' | 'insufficient', estimatedFields: string[], totalFields: number, entityType: 'cartridge' | 'rifle', entityId: string }`
   - This is a regular HTML component (not SVG), rendered above the drawing
   - Three states:
     - `'full'`: No banner (return null)
     - `'basic'`: Yellow/amber banner `bg-amber-900/30 border-amber-600 text-amber-200` showing "Vista basica -- {available} de {total} dimensiones disponibles" with a Link to `/cartridges` or `/rifles` page saying "Completar datos"
     - `'insufficient'`: Orange/red banner `bg-red-900/30 border-red-600 text-red-200` showing "No hay suficientes dimensiones para dibujar este {entityType}" with a Link to the entity's edit page
   - Uses lucide-react `AlertTriangle` icon for basic, `XCircle` icon for insufficient
   - Spanish text throughout

5. **StyleToggle.tsx** -- Blueprint/Modern toggle button:
   - Props: `{ style: 'blueprint' | 'modern', onToggle: () => void }`
   - Renders a pill-shaped toggle button with two segments: "Blueprint" and "Moderno"
   - Active segment has `bg-blue-600 text-white`, inactive has `bg-slate-800 text-slate-400`
   - Uses Tailwind classes matching the existing dark theme (see Sidebar.tsx)
   - Does NOT manage its own state or localStorage -- the parent component handles that via a `useDrawingStyle` hook (to be created in Plan 03)
  </action>
  <verify>
    <automated>cd frontend && npx tsc --noEmit 2>&1 | head -30</automated>
  </verify>
  <done>5 shared drawing sub-components exist and compile, each follows the established prop patterns and theme system</done>
</task>

<task type="auto">
  <name>Task 2: Create three main drawing SVG components (CartridgeCrossSection, ChamberDrawing, AssemblyDrawing)</name>
  <files>
    frontend/src/components/drawings/CartridgeCrossSection.tsx
    frontend/src/components/drawings/ChamberDrawing.tsx
    frontend/src/components/drawings/AssemblyDrawing.tsx
  </files>
  <action>
All components use `'use client'` directive. All accept `ref` via `React.forwardRef` so the parent can pass a ref for SVG export serialization. Each returns an `<svg>` element with proper viewBox, xmlns, and inline attributes (no CSS classes on SVG elements -- critical for export serialization).

**IMPORTANT anti-pattern from research:** Keep geometry computation in the `lib/drawings/` functions. These components should ONLY handle mapping computed data to SVG JSX elements. Do not duplicate coordinate math inside components.

### CartridgeCrossSection.tsx (VIS2-01)

Props: `{ cartridge: Cartridge, bullet?: Bullet, style: 'blueprint' | 'modern', width?: number, height?: number }`

Implementation:
1. Map `cartridge` fields to `CartridgeDimensions` interface, call `generateCartridgeProfile(dims)` from Phase 11 geometry engine
2. If `dataCompleteness === 'insufficient'`, return null (parent handles insufficient message via CompletenessBanner)
3. If `bullet` provided, also call `generateBulletProfile(bulletDims)` to draw the seated bullet
4. Get theme via `getTheme(style)` from `lib/drawings/themes`
5. Compute viewBox: drawing coordinate system is in mm. Total width = `cartridge.overall_length_mm || cartridge.case_length_mm` + padding. Total height = max diameter * 2 + padding for dimensions + title block
6. Render SVG structure:
   ```
   <svg viewBox="..." xmlns="..." ref={ref}>
     <defs>
       <HatchPatterns theme={theme} />
     </defs>
     <rect fill={theme.background} /> {/* Full background */}
     <g transform="translate(padL, centerY)"> {/* Drawing group centered */}
       {/* Case outer profile: path from geometry engine */}
       <path d={result.svgPath} fill={theme.caseFill || 'url(#hatch-brass)'} stroke={theme.outline} strokeWidth={0.7} />

       {/* Internal structure (cross-section view): */}
       {/* Case wall: the outer profile path minus an inner path inset ~0.8mm for case wall thickness */}
       {/* Primer pocket: small rectangle at base, centered, ~4mm diameter x 3mm deep */}
       {/* Powder charge area: path inside case wall from base to bullet base, fill with 'url(#hatch-powder)' */}

       {/* Bullet (if provided): */}
       {/* Bullet jacket outline from bulletResult.svgPath, positioned at x = case_length_mm to overall_length_mm */}
       {/* Lead core: inset path, fill with theme.leadColor or 'url(#fill-lead)' */}
       {/* Copper jacket: outer path, fill with theme.copperFill or 'url(#hatch-copper)' */}

       {/* Hidden edges (internal walls not visible from outside): dashed lines */}
       {/* E.g., case web thickness line at base, internal shoulder geometry */}
     </g>
     {/* Dimension annotations */}
     <g> {/* Dimensions group */}
       {/* Build DimensionAnnotation[] for all available fields: */}
       {/* Top side: overall_length, case_length, body_length, neck_length */}
       {/* Bottom side: shoulder_angle (angle arc instead of linear dim) */}
       {/* Left side: rim_diameter, base_diameter */}
       {/* Right side: neck_diameter, bore_diameter */}
       {/* Call layoutDimensions() to assign offset tiers, then render DimensionLabel for each */}
       {/* Mark estimated dimensions with isEstimated={true} */}
     </g>
     <TitleBlock x={...} y={...} data={titleBlockData} theme={theme} />
   </svg>
   ```
7. Default width=900, height=500 (can be overridden by props)

### ChamberDrawing.tsx (VIS2-02)

Props: `{ cartridge: Cartridge, bullet?: Bullet, rifle: Rifle, style: 'blueprint' | 'modern', width?: number, height?: number }`

Implementation:
1. Call `computeChamberClearances(cartridge, bullet, rifle)` from `lib/drawings/chamber-geometry`
2. Call `computeChamberProfile(cartridge, clearances)` for the chamber outline profile points
3. Call `generateCartridgeProfile(cartridgeDims)` for the cartridge outline
4. If cartridge geometry is insufficient, return null
5. Render SVG structure:
   ```
   <svg viewBox="..." xmlns="..." ref={ref}>
     <defs><HatchPatterns theme={theme} /></defs>
     <rect fill={theme.background} />
     <g transform="translate(padL, centerY)">
       {/* Chamber outline (steel): slightly larger than cartridge, fill with theme.steelFill or 'url(#hatch-metal)' */}
       {/* Cartridge inside chamber: same as cross-section but slightly offset by headspace_gap */}
       {/* Clearance gaps visualized: thin colored regions between cartridge and chamber wall */}
       {/* Headspace gap: annotated gap at case head */}
       {/* Neck clearance: annotated radial gap at neck region */}
       {/* Body clearance: annotated radial gap at body */}
       {/* Freebore zone: unrifled bore ahead of case mouth, drawn as cylinder section */}
       {/* Throat/leade: angled transition from freebore to rifled bore, shown with dashed lines */}
       {/* Rifling start: short helical pattern indicator or crossed lines */}
       {/* Bullet engagement zone: the part of bullet in contact with rifling */}
     </g>
     <g> {/* Clearance dimension callouts */}
       {/* DimensionLabel for headspace_gap_mm, neck_clearance_mm, body_clearance_mm */}
       {/* DimensionLabel for freebore_mm */}
       {/* Text annotation for throat_angle_deg (angle callout) */}
       {/* DimensionLabel for rifling_engagement_mm (if bullet provided) */}
       {/* All clearance labels show computed values, marked isEstimated if from estimated_fields */}
     </g>
     <TitleBlock ... drawingType="Cartridge in Chamber" />
   </svg>
   ```

### AssemblyDrawing.tsx (VIS2-03)

Props: `{ cartridge: Cartridge, bullet?: Bullet, rifle: Rifle, simulation?: SimulationResult, style: 'blueprint' | 'modern', width?: number, height?: number }`

Implementation:
1. Call `computeAssemblyLayout(cartridge, bullet, rifle)` from `lib/drawings/assembly-geometry`
2. Call `generateCartridgeProfile(cartridgeDims)` for cartridge in the assembly
3. If cartridge geometry is insufficient, return null
4. If simulation provided, call `getObtNodePositions(rifle.barrel_length_mm, simulation)` and `getStressZone(simulation, cartridge.saami_max_pressure_psi)`
5. Render SVG structure:
   ```
   <svg viewBox="..." xmlns="..." ref={ref}>
     <defs><HatchPatterns theme={theme} /></defs>
     <rect fill={theme.background} />
     <g transform="translate(padL, centerY)">
       {/* Barrel: straight cylinder from assembly.barrel_start_x to assembly.barrel_end_x */}
       {/* Outer wall: rect with assembly.barrel_outer_r, fill with theme.steelFill or 'url(#hatch-metal)' */}
       {/* Bore: inner rect cut from outer, showing through */}
       {/* Rifling: short diagonal hash marks at bore entrance */}

       {/* Cartridge: positioned at assembly.cartridge_x */}
       {/* Reuse cartridge profile path from geometry engine */}

       {/* Bullet: positioned protruding from case mouth */}

       {/* Simulation overlay (only if simulation prop provided): */}
       {simulation && <>
         {/* OBT node positions: green dashed vertical lines at computed positions */}
         {/* Each OBT node labeled "OBT 1", "OBT 2", etc. above the barrel */}
         {/* Current barrel time: solid colored line at muzzle */}
         {/* OBT match indicator: green checkmark or red X near muzzle */}

         {/* Stress zone: gradient or colored overlay on the chamber region */}
         {/* severity='safe' -> green tint, 'caution' -> yellow, 'danger' -> red */}
         {/* Semi-transparent rect over the chamber region with appropriate color */}

         {/* Pressure zone text annotation: "{peak_pressure_psi} PSI ({percentage}% SAAMI)" */}
       </>}
     </g>
     {/* Barrel length dimension: top side, full barrel length */}
     {/* Overall length dimension: cartridge OAL */}
     <TitleBlock ... drawingType={simulation ? "Assembly with Simulation" : "Barrel Assembly"} />
   </svg>
   ```
6. Assembly uses a much wider viewBox since barrel_length_mm (400-700mm) >> cartridge length (50-80mm). Use a non-linear scale: cartridge area at higher magnification, barrel compressed. Or better: use a break-line symbol (zigzag) to skip the middle of the barrel, showing chamber area and muzzle area in detail. Decision: use full-scale representation with the viewBox width proportional to barrel length. The SVG scales to fit the container width, so even long barrels display well. Default width=1200, height=400.
  </action>
  <verify>
    <automated>cd frontend && npx tsc --noEmit 2>&1 | head -30</automated>
  </verify>
  <done>Three main drawing components render complete technical SVGs with hatching, dimensions, and simulation overlay, consuming Plan 01's library functions. All compile cleanly.</done>
</task>

</tasks>

<verification>
1. `cd frontend && npx tsc --noEmit` -- zero TypeScript errors
2. `ls frontend/src/components/drawings/` -- 8 .tsx files exist
3. `grep -l "generateCartridgeProfile" frontend/src/components/drawings/CartridgeCrossSection.tsx` -- geometry engine integration confirmed
4. `grep -l "computeChamberClearances" frontend/src/components/drawings/ChamberDrawing.tsx` -- chamber computation integration confirmed
5. `grep -l "computeAssemblyLayout" frontend/src/components/drawings/AssemblyDrawing.tsx` -- assembly computation integration confirmed
6. `grep -l "forwardRef" frontend/src/components/drawings/CartridgeCrossSection.tsx frontend/src/components/drawings/ChamberDrawing.tsx frontend/src/components/drawings/AssemblyDrawing.tsx` -- all 3 main components expose refs for export
</verification>

<success_criteria>
- CartridgeCrossSection renders a cross-section SVG with case wall, internal structure, hatching, and dual-unit dimension labels from any cartridge with sufficient data
- ChamberDrawing renders cartridge-in-chamber with computed clearance values as labeled dimensions
- AssemblyDrawing renders barrel + cartridge + optional OBT overlay from simulation data
- All 3 drawings return null for insufficient data (parent handles messaging)
- Blueprint and modern themes produce visually distinct drawings via theme prop
- Estimated dimensions are visually distinguished (dashed line + "(est)" label)
- All 8 component files compile without TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/12-2d-svg-technical-drawings/12-02-SUMMARY.md`
</output>
